{"version":3,"file":"vcf-field-description.js","sourceRoot":"","sources":["../src/vcf-field-description.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, customElement, property } from 'lit-element';\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\n\n@customElement('vcf-field-description')\nexport class VcfFieldDescription extends LitElement {\n    // --- --- --- Properties --- --- ---\n\n    @property({type: Boolean})\n    get expanded() {\n        return this._expanded;\n    }\n    set expanded(expanded: Boolean) {\n        if(expanded == null) return;\n        const oldValue = this._expanded;\n        this._expanded = expanded;\n        this.requestUpdate(\"expanded\", oldValue);\n    }\n    private _expanded: Boolean = false;\n\n    @property({type: String})\n    description = \"\";\n\n    @property({type: Boolean})\n    expandButtonIsKbFocusable = false;\n\n    @property({type: String})\n    feedbackState: String = 'INFO';\n\n    @property({type: String})\n    feedbackContent = \"\";\n\n    @property({type: Boolean})\n    reserveDescriptionHeight = false;\n\n    @property({type: Boolean})\n    reserveFeedbackHeight = false;\n\n    @property({type: Boolean}) set renderDescriptionAsHtml(renderDescriptionAsHtml: Boolean) {\n        if(renderDescriptionAsHtml == null) return;\n        this._renderDescriptionAsHtml = renderDescriptionAsHtml;\n    }\n    private _renderDescriptionAsHtml: Boolean = false;\n\n    @property({type: Boolean})\n    set renderFeedbackAsHtml(renderFeedbackAsHtml: Boolean) {\n        if(renderFeedbackAsHtml == null) return;\n        else this._renderFeedbackAsHtml = renderFeedbackAsHtml;\n    }\n    private _renderFeedbackAsHtml: Boolean = false;\n\n    private _objectId: string = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    private _expanding: Boolean = false;\n    private _fieldDescriptionTextMeasuredWidth: number = -1;\n    private _fieldDescriptionTextMeasuredHeight: number = -1;\n    private _fieldDescriptionFeedbackMeasuredWidth: number = -1;\n    private _fieldDescriptionFeedbackMeasuredHeight: number = -1;\n\n    // --- --- --- Lifecycle --- --- ---\n\n    createRenderRoot() {  // Render template without shadow DOM.\n        return this;\n    }\n\n    render() {\n        this.dataset.oid = this._objectId;\n        return html`\n            <style>\n                :root {\n                    --field-description-success-color: var(--lumo-success-text-color);\n                    --field-description-info-color: #2a88c7;\n                    --field-description-warn-color: #c78f2a;\n                    --field-description-error-color: var(--lumo-error-text-color);\n                }\n\n                vcf-field-description .field-description-container {\n                    display: flex;\n                }\n\n                vcf-field-description .field-description {\n                    flex-grow: 1;\n                    padding-top: 1px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    white-space: nowrap;\n                    transition: max-height 0.8s;\n                    max-height: 20px;\n                }\n\n                vcf-field-description .expand-icon-container {\n                    flex-grow: 0;\n                    min-width: 20px;\n                    cursor: pointer;\n                }\n\n                vcf-field-description .expand-icon-container iron-icon {\n                    height: 15px;\n                }\n\n                vcf-field-description .field-description-helper {\n                    position: absolute;\n                    left: 0;\n                    top: 0;\n                    white-space: normal;\n                    z-index: -1;\n                    visibility: hidden;\n                    white-space: normal;\n                }\n\n                vcf-field-description .field-description-feedback-container[data-state=\"SUCCESS\"] {\n                    color: var(--field-description-success-color);\n                }\n\n                vcf-field-description .field-description-feedback-container[data-state=\"INFO\"] {\n                    color: var(--field-description-info-color);\n                }\n\n                vcf-field-description .field-description-feedback-container[data-state=\"WARN\"] {\n                    color: var(--field-description-warn-color);\n                }\n\n                vcf-field-description .field-description-feedback-container[data-state=\"ERROR\"] {\n                    color: var(--field-description-error-color);\n                }\n\n                vcf-field-description .field-description-feedback-container iron-icon {\n                    height: 14px;\n                    vertical-align: top;\n                }\n\n                vcf-field-description .field-description-feedback {\n                    margin-top: 18px;\n                    display: table;\n                }\n\n                vcf-field-description .field-description-feedback > * {\n                    display: table-cell;\n                }\n            </style>\n\n            <div class=\"field-description-component-wrapper\">\n                <div class=\"field-description-container\">\n                    ${ this._renderDescription() }\n                </div>\n                <div class=field-description-feedback-container data-state=\"${this.feedbackState}\">\n                    ${ this._renderFeedback() }\n                </div>\n            </div>`;\n    }\n\n    updated() {\n        this._placeExpandIcon();\n        this._setDoubleClickListener()\n        this._takeMeasurementsAndReserveHeights()\n    }\n\n    // --- --- --- Methods --- --- ---\n\n    _renderDescription() {\n        return html`\n            <div class=\"field-description\">\n                ${ this._renderDescriptionAsHtml ? unsafeHTML(this.description) : html`<span>${this.description}` }</span>\n                <div class=\"field-description-helper field-description-helper-textmeasurements\" aria-hidden=\"true\">\n                    ${ this._renderDescriptionAsHtml ? unsafeHTML(this.description) : this.description }\n                </div>\n            </div>\n            <div class=\"expand-icon-container\"></div>`;\n    }\n\n    _renderFeedback() {\n        if(!this.feedbackContent) return html``;\n        return html`\n            <div class=\"field-description-feedback\" data-state=\"${this.feedbackState}\" aria-live=\"assertive\">\n                <iron-icon icon=\"vaadin:info\"></iron-icon>\n                ${ this._renderFeedbackAsHtml ? unsafeHTML(this.feedbackContent) : html`<span>${this.feedbackContent}` }</span>\n            </div>\n            ${\n                this.reserveFeedbackHeight ?\n                    html`\n                            <div class=\"field-description-helper field-description-helper-feedbackmeasurements\" aria-hidden=\"true\">\n                                <iron-icon icon=\"vaadin:info\"></iron-icon>\n                                ${ this._renderFeedbackAsHtml ? unsafeHTML(this.feedbackContent) : html`<span>${this.feedbackContent}` }</span>\n                            </div>\n                    ` : ''\n            }\n\n        `;\n    }\n\n    _placeExpandIcon() {\n        let _this = this;\n        setTimeout(() => {\n            let ellipsis = false;\n            let fieldDescriptionContainerElement = _this.querySelector<HTMLElement>('.field-description');\n            if(fieldDescriptionContainerElement != null && fieldDescriptionContainerElement.offsetWidth < fieldDescriptionContainerElement.scrollWidth) ellipsis = true;\n\n            let iconContainerElement = this.querySelector<HTMLElement>('.expand-icon-container');\n            if(!iconContainerElement) return;\n            iconContainerElement.innerHTML = '';\n\n            let iconElement = document.createElement('iron-icon');\n            iconElement.setAttribute('aria-hidden', 'true'); //TODO: should this be set to false when expandbutton is focusable ?\n            iconElement.setAttribute('tabindex', this.expandButtonIsKbFocusable ? '0' : '-1');\n            iconElement.onclick = function(/* ev */) {\n                _this.toggleExpandDescription();\n            }\n            iconContainerElement.appendChild(iconElement);\n\n            if(ellipsis) {\n                iconElement.setAttribute('icon', 'vaadin:info-circle');\n            } else {\n                if(this._expanded || this._expanding) iconElement.setAttribute('icon', 'vaadin:chevron-circle-up');\n            }\n        }, 1);\n    }\n\n    _setDoubleClickListener() {\n        let element = this.querySelector<HTMLElement>('.field-description');\n        if(!element) return;\n        let _this = this;\n        element.ondblclick = function(/* ev */) {\n            _this.toggleExpandDescription();\n        }\n    }\n\n    toggleExpandDescription() {\n        this._expanding = true;\n        this._expanded = !this._expanded;\n\n        let _this = this;\n        setTimeout(() => {\n            let ellipsis = false;\n            let fieldDescriptionContainerElement = _this.querySelector<HTMLElement>('.field-description');\n            if(fieldDescriptionContainerElement != null && fieldDescriptionContainerElement.offsetWidth < fieldDescriptionContainerElement.scrollWidth) ellipsis = true;\n\n            let element = this.querySelector<HTMLElement>('.field-description');\n            if(element) {\n                if(ellipsis || !this._expanded) {\n                    if(this._expanded) {\n                        element.style.textOverflow = 'unset';\n                        element.style.whiteSpace = 'unset';\n                        element.style.maxHeight = this._fieldDescriptionTextMeasuredHeight != -1 ? this._fieldDescriptionTextMeasuredHeight + 'px' : 'none';\n                        this._placeExpandIcon();\n                        this._expanding = false;\n                    } else {\n                        element.style.maxHeight = '20px';\n                        setTimeout(() => {\n                            if(!element) return;\n                            element.style.textOverflow = 'ellipsis';\n                            element.style.whiteSpace = 'nowrap';\n                            this._placeExpandIcon();\n                            this._expanding = false;\n                        }, 800)\n                    }\n                }\n            }\n        }, 1);\n    }\n\n    _takeMeasurementsAndReserveHeights() {\n        let _this = this;\n        setTimeout(() => {\n            let ellipsis = false;\n            let fieldDescriptionContainerElement = _this.querySelector<HTMLElement>('.field-description');\n            if(fieldDescriptionContainerElement != null && fieldDescriptionContainerElement.offsetWidth < fieldDescriptionContainerElement.scrollWidth) ellipsis = true;\n\n            let wrapperElement = _this.querySelector<HTMLElement>('.field-description-component-wrapper');\n            let textElement = _this.querySelector<HTMLElement>('.field-description');\n            let feedbackElement = _this.querySelector<HTMLElement>('.field-description-feedback');\n            let helperElementD = _this.querySelector<HTMLElement>('.field-description-helper-textmeasurements');\n            let helperElementF = _this.querySelector<HTMLElement>('.field-description-helper-feedbackmeasurements');\n\n            if(!wrapperElement || !helperElementD) return;\n            if(_this.feedbackContent && _this.reserveFeedbackHeight && (!feedbackElement || !helperElementF)) return;\n\n            if(textElement && helperElementD) {\n                if(ellipsis || _this._expanded) {\n                    _this._fieldDescriptionTextMeasuredWidth = textElement.offsetWidth;\n                    helperElementD.style.width = `${this._fieldDescriptionTextMeasuredWidth}px`;\n                    _this._fieldDescriptionTextMeasuredHeight = helperElementD.offsetHeight;\n                }\n            } else {\n                _this._fieldDescriptionTextMeasuredWidth = -1;\n                _this._fieldDescriptionTextMeasuredHeight = -1;\n            }\n\n            if(this.feedbackContent && feedbackElement && helperElementF) {\n                _this._fieldDescriptionFeedbackMeasuredWidth = feedbackElement.offsetWidth;\n                helperElementF.style.width = `${this._fieldDescriptionFeedbackMeasuredWidth}px`;\n                _this._fieldDescriptionFeedbackMeasuredHeight = helperElementF.offsetHeight;\n            } else {\n                _this._fieldDescriptionFeedbackMeasuredWidth = -1;\n                _this._fieldDescriptionFeedbackMeasuredHeight = -1;\n            }\n\n            // reserve heights\n            let minWrapperHeight = 1;\n            if(this.reserveDescriptionHeight && this._fieldDescriptionTextMeasuredHeight > -1) minWrapperHeight = minWrapperHeight + this._fieldDescriptionTextMeasuredHeight;\n            if(this.reserveFeedbackHeight && this._fieldDescriptionFeedbackMeasuredHeight > -1) minWrapperHeight = minWrapperHeight + this._fieldDescriptionFeedbackMeasuredHeight + 2;\n            wrapperElement.style.minHeight = `${minWrapperHeight}px`\n        }, 1);\n    }\n\n}"]}